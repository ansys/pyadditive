
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/gallery_examples/02_additive_2d_microstructure.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_gallery_examples_02_additive_2d_microstructure.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_gallery_examples_02_additive_2d_microstructure.py:


2D Microstructure analysis
##########################

This example shows how to use PyAdditive to determine
the two-dimensional microstructure in the XY, XZ, and YZ
planes for a sample coupon with given material and
machine parameters.

Units are SI (m, kg, s, K) unless otherwise noted.

.. GENERATED FROM PYTHON SOURCE LINES 34-37

Perform required import and connect
-----------------------------------
Perform the required import and connect to the Additive service.

.. GENERATED FROM PYTHON SOURCE LINES 37-47

.. code-block:: Python


    from ansys.additive.core import (
        Additive,
        AdditiveMachine,
        MicrostructureInput,
        SimulationError,
    )

    additive = Additive()








.. GENERATED FROM PYTHON SOURCE LINES 48-52

Select material
---------------
Select a material. You can use the :meth:`~Additive.materials_list` method to
obtain a list of available materials.

.. GENERATED FROM PYTHON SOURCE LINES 52-55

.. code-block:: Python


    print("Available material names: {}".format(additive.materials_list()))





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Available material names: ['AlSi10Mg', 'Al357', 'CoCr', 'IN718', 'IN625', '316L', '17-4PH', 'Ti64']




.. GENERATED FROM PYTHON SOURCE LINES 56-58

You can obtain the parameters for a single material by passing a name
from the materials list to the :meth:`~Additive.material` method.

.. GENERATED FROM PYTHON SOURCE LINES 58-61

.. code-block:: Python


    material = additive.material("17-4PH")








.. GENERATED FROM PYTHON SOURCE LINES 62-67

Specify machine parameters
--------------------------
Specify machine parameters by first creating an :class:`AdditiveMachine` object
and then assigning the desired values. All values are in SI units (m, kg, s, K)
unless otherwise noted.

.. GENERATED FROM PYTHON SOURCE LINES 67-73

.. code-block:: Python


    machine = AdditiveMachine()

    # Show available parameters
    print(machine)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    AdditiveMachine
    laser_power: 195.0 W
    scan_speed: 1.0 m/s
    heater_temperature: 80.0 °C
    layer_thickness: 5e-05 m
    beam_diameter: 0.0001 m
    starting_layer_angle: 57 °
    layer_rotation_angle: 67 °
    hatch_spacing: 0.0001 m
    slicing_stripe_width: 0.01 m
    heat_source_model: gaussian
    ring_mode_index: 0





.. GENERATED FROM PYTHON SOURCE LINES 74-77

Set laser power and scan speed
------------------------------
Set the laser power and scan speed.

.. GENERATED FROM PYTHON SOURCE LINES 77-81

.. code-block:: Python


    machine.scan_speed = 1  # m/s
    machine.laser_power = 500  # W








.. GENERATED FROM PYTHON SOURCE LINES 82-89

Specify inputs for microstructure simulation
---------------------------------------------
Microstructure simulation inputs can include thermal parameters.
Thermal parameters consist of ``cooling_rate``, ``thermal_gradient``,
``melt_pool_width``, and ``melt_pool_depth``. If thermal parameters are not
specified, the thermal solver is used to obtain the parameters prior
to running the microstructure solver.

.. GENERATED FROM PYTHON SOURCE LINES 89-116

.. code-block:: Python


    # Specify microstructure inputs with thermal parameters
    input_with_thermal = MicrostructureInput(
        machine=machine,
        material=material,
        sensor_dimension=0.0005,
        sample_size_x=0.001,  # in meters (1 mm), must be >= sensor_dimension + 0.0005
        sample_size_y=0.001,  # in meters (1 mm), must be >= sensor_dimension + 0.0005
        sample_size_z=0.0015,  # in meters (1 mm), must be >= sensor_dimension + 0.001
        use_provided_thermal_parameters=True,
        cooling_rate=1.1e6,  # °K/s
        thermal_gradient=1.2e7,  # °K/m
        melt_pool_width=1.5e-4,  # meters (150 microns)
        melt_pool_depth=1.1e-4,  # meters (110 microns)
    )

    # Specify microstructure inputs without thermal parameters
    input_without_thermal = MicrostructureInput(
        machine=machine,
        material=material,
        sensor_dimension=0.0005,
        sample_size_x=0.001,  # in meters (1 mm), must be >= sensor_dimension + 0.0005
        sample_size_y=0.001,  # in meters (1 mm), must be >= sensor_dimension + 0.0005
        sample_size_z=0.0015,  # in meters (1 mm), must be >= sensor_dimension + 0.001
        # use_provided_thermal_parameters defaults to False
    )








.. GENERATED FROM PYTHON SOURCE LINES 117-122

Run simulation
--------------
Use the :meth:`~Additive.simulate` method of the ``additive`` object to run the simulation.
The returned object is either a :class:`MicrostructureSummary` object or a
:class:`SimulationError` object.

.. GENERATED FROM PYTHON SOURCE LINES 122-127

.. code-block:: Python


    summary = additive.simulate(input_with_thermal)
    if isinstance(summary, SimulationError):
        raise Exception(summary.message)








.. GENERATED FROM PYTHON SOURCE LINES 128-135

Plot results
------------
The ``summary``` object includes three VTK files, one for each of the
XY, XZ, and YZ planes. Each VTK file contains data sets for grain orientation,
boundaries, and number. In addition, the ``summary`` object
includes circle equivalence data and average grain size for each plane.
See :class:`MicrostructureSummary` for details.

.. GENERATED FROM PYTHON SOURCE LINES 135-145

.. code-block:: Python


    import matplotlib.pyplot as plt
    import pandas as pd
    import pyvista as pv
    from matplotlib import colors
    from matplotlib.colors import LinearSegmentedColormap as colorMap
    from matplotlib.ticker import PercentFormatter

    from ansys.additive.core import CircleEquivalenceColumnNames








.. GENERATED FROM PYTHON SOURCE LINES 146-150

Plot 2D grain visualizations
^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Plot the planar data, read VTK data in data set objects, and create a color
map to use with the boundary map.

.. GENERATED FROM PYTHON SOURCE LINES 150-200

.. code-block:: Python



    # Function to plot the planar data
    def plot_microstructure(
        xy_data: any,
        xz_data: any,
        yz_data: any,
        scalars: str,
        cmap: colors.LinearSegmentedColormap,
    ):
        """Convenience function to plot microstructure VTK data."""
        font_size = 8
        plotter = pv.Plotter(shape=(2, 2), lighting="three lights")
        plotter.show_axes_all()
        plotter.add_mesh(xy_data, cmap=cmap, scalars=scalars)
        plotter.add_title("XY Plane", font_size=font_size)

        plotter.subplot(0, 1)
        plotter.add_mesh(xz_data, cmap=cmap, scalars=scalars)
        plotter.add_title("XZ Plane", font_size=font_size)

        plotter.subplot(1, 0)
        plotter.add_mesh(yz_data, cmap=cmap, scalars=scalars)
        plotter.add_title("YZ Plane", font_size=font_size)

        plotter.subplot(1, 1)
        plotter.add_mesh(xy_data, cmap=cmap, scalars=scalars)
        plotter.add_mesh(xz_data, cmap=cmap, scalars=scalars)
        plotter.add_mesh(yz_data, cmap=cmap, scalars=scalars)
        plotter.add_title("Combined", font_size=font_size)

        return plotter


    # Read VTK data into pyvista.DataSet objects
    xy = pv.read(summary.xy_vtk)
    xz = pv.read(summary.xz_vtk)
    yz = pv.read(summary.yz_vtk)

    # Create a color map to use with the boundary plot
    white_black_cmap = colorMap.from_list("whiteblack", ["white", "black"])

    plot_microstructure(xy, xz, yz, "GrainBoundaries", white_black_cmap).show(
        title="Grain Boundaries"
    )
    plot_microstructure(xy, xz, yz, "Orientation_(deg)", "spectral").show(
        title="Orientation °"
    )
    plot_microstructure(xy, xz, yz, "GrainNumber", None).show(title="Grain Number")




.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_001.png
          :alt: 02 additive 2d microstructure
          :srcset: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_001.png
          :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_002.png
          :alt: 02 additive 2d microstructure
          :srcset: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_002.png
          :class: sphx-glr-multi-img

    *

      .. image-sg:: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_003.png
          :alt: 02 additive 2d microstructure
          :srcset: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_003.png
          :class: sphx-glr-multi-img





.. GENERATED FROM PYTHON SOURCE LINES 201-205

Plot grain statistics
^^^^^^^^^^^^^^^^^^^^^
Add grain statistic plots to a figure, create a figure for grain statistics,
and then plot the figure.

.. GENERATED FROM PYTHON SOURCE LINES 205-262

.. code-block:: Python



    # Function to simplify plotting grain statistics
    def add_grain_statistics_to_figure(
        plane_data: pd.DataFrame,
        plane_str: str,
        plane_ave_grain_size: float,
        diameter_axes: plt.Axes,
        orientation_axes: plt.Axes,
    ):
        """Convenience function to add grain statistic plots to a figure."""
        xmax = len(plane_data[CircleEquivalenceColumnNames.DIAMETER])
        diameter_axes.hist(
            plane_data[CircleEquivalenceColumnNames.DIAMETER], bins=20, rwidth=0.75
        )
        diameter_axes.set_xlabel("Grain Diameter (µm)")
        diameter_axes.set_ylabel("Area Fraction")
        diameter_axes.set_title(
            plane_str.upper()
            + f" Grain Size Distribution, ave: {plane_ave_grain_size:.2f} µm"
        )
        diameter_axes.yaxis.set_major_formatter(PercentFormatter(xmax=xmax))
        orientation_axes.hist(
            plane_data[CircleEquivalenceColumnNames.ORIENTATION_ANGLE], bins=9, rwidth=0.75
        )
        orientation_axes.yaxis.set_major_formatter(PercentFormatter(xmax=xmax))
        orientation_axes.set_xlabel("Orientation Angle (°)")
        orientation_axes.set_ylabel("Number Fraction")
        orientation_axes.set_title(plane_str.upper() + " Orientation Angle")


    # Create figure for grain statistics
    fig, axs = plt.subplots(3, 2, figsize=(10, 15), tight_layout=True)
    fig.suptitle("Circle Equivalence Grain Data", fontsize=16)
    add_grain_statistics_to_figure(
        summary.xy_circle_equivalence,
        "xy",
        summary.xy_average_grain_size,
        axs[0][0],
        axs[0][1],
    )
    add_grain_statistics_to_figure(
        summary.xz_circle_equivalence,
        "xz",
        summary.xz_average_grain_size,
        axs[1][0],
        axs[1][1],
    )
    add_grain_statistics_to_figure(
        summary.yz_circle_equivalence,
        "yz",
        summary.yz_average_grain_size,
        axs[2][0],
        axs[2][1],
    )
    plt.show()




.. image-sg:: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_004.png
   :alt: Circle Equivalence Grain Data, XY Grain Size Distribution, ave: 28.59 µm, XY Orientation Angle, XZ Grain Size Distribution, ave: 36.46 µm, XZ Orientation Angle, YZ Grain Size Distribution, ave: 35.65 µm, YZ Orientation Angle
   :srcset: /examples/gallery_examples/images/sphx_glr_02_additive_2d_microstructure_004.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 263-266

Print the simulation logs
-------------------------
To print the simulation logs, use the :meth:`~MicrostructureSummary.logs` property.

.. GENERATED FROM PYTHON SOURCE LINES 266-268

.. code-block:: Python


    print(summary.logs)




.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    File: microstructure-log.log
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: MeshSpacing: 1.000000e-06
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: LaserSpeed: 1.000000e+00
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: DepositLayerThickness: 5.000000e-05
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: BoundaryMultiplier: 1.000000e+00
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: BorderGrainBoundaries: 10
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: KineticAnisotropy: 7.000000e-01
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: InterfaceKinematicCoefficient: 2.000000e-03
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: GibbsThomsonCoefficient: 1.700000e-07
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: NucleationConstantInterface: 2.377834e+00
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: NucleationConstantBulk: 2.844440e+04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: b0: 0.800000
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: XYPlaneRotationAngleInfluence: 1
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: ScanFilePath: /tmp/additive/68a054c4af1d2/hatch-files/LaserPosition
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: OutputPath: 
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: sensorid: 1
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         x: 5.000000e-04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         y: 5.000000e-04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         z: 5.000000e-04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         length: 5.000000e-04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         meltpoolwidth: 1.500000e-04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         meltpooldepth: 1.100000e-04
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         thermalgradient: 1.200000e+07
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         coolingrate: 1.100000e+06
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO:         SensorOutputPrefix: /tmp/additive/68a054c4af1d2/microstructure/Microstructure
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: OracleType: uniform-parallel
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: OracleNumberFile: ./randnum.csv
    Fri Oct 31 07:55:22 2025 -> SOLVERINFO: RNGSeed: 1604765425
    Fri Oct 31 07:55:27 2025 -> DESKTOPINFO: License successfully obtained.
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Skipping HPC license checkout as 4 are being requested.
    Fri Oct 31 07:55:27 2025 -> USERINFO: Starting MicrostructureSolver v16.4.0-dev, SolverCommon v14.108.0
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Begin Run
    Fri Oct 31 07:55:27 2025 -> DESKTOPINFO: Using 4 threads for solver
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Total Number of Sensors: 1
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Run Sensor 1
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Layers to read:
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO:    Bottom of sensor layer index = 0
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO:    Top of sensor layer index = 9
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO:    Layer index for remelting sensor = 11
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Oracle for plane id 0 received seed of 1604768858
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Thread 0 gets seed: 1604768858
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Thread 1 gets seed: 1604768937
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Thread 2 gets seed: 1604769016
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Thread 3 gets seed: 1604769095
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Longitude Line Solver took 235 steps out of 5656 max allowed.
    Fri Oct 31 07:55:27 2025 -> SOLVERINFO: Longitude Line Solver took 260 steps out of 6268 max allowed.
    Fri Oct 31 07:55:28 2025 -> SOLVERINFO: Longitude Line Solver took 257 steps out of 6268 max allowed.
    Fri Oct 31 07:55:28 2025 -> SOLVERINFO: Longitude Line Solver took 240 steps out of 6268 max allowed.
    Fri Oct 31 07:55:28 2025 -> SOLVERINFO: Longitude Line Solver took 260 steps out of 6268 max allowed.
    Fri Oct 31 07:55:28 2025 -> SOLVERINFO: Longitude Line Solver took 240 steps out of 6268 max allowed.
    Fri Oct 31 07:55:28 2025 -> SOLVERINFO: Longitude Line Solver took 260 steps out of 6268 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Longitude Line Solver took 272 steps out of 6268 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Longitude Line Solver took 260 steps out of 6156 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: PercentComplete: 33.3
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Oracle for plane id 1 received seed of 1604768859
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Thread 0 gets seed: 1604768859
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Thread 1 gets seed: 1604768938
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Thread 2 gets seed: 1604769017
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Thread 3 gets seed: 1604769096
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Starting layer (relative index): 0
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Latitude Line Solver took 271 steps out of 1408 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Latitude Line Solver took 262 steps out of 1408 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Latitude Line Solver took 266 steps out of 1408 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Latitude Line Solver took 271 steps out of 1408 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Latitude Line Solver took 266 steps out of 1408 max allowed.
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: PercentComplete: 36
    Fri Oct 31 07:55:29 2025 -> SOLVERINFO: Starting layer (relative index): 1
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 248 steps out of 1420 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 280 steps out of 1420 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 269 steps out of 1420 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 260 steps out of 1420 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 260 steps out of 1420 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: PercentComplete: 38.8
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Starting layer (relative index): 2
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 440 steps out of 5298 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: PercentComplete: 41.6
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Starting layer (relative index): 3
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 223 steps out of 1264 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 243 steps out of 1264 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 231 steps out of 1264 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 231 steps out of 1264 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 224 steps out of 1264 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 260 steps out of 1264 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: PercentComplete: 44.4
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Starting layer (relative index): 4
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 360 steps out of 1902 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 321 steps out of 1902 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 320 steps out of 1902 max allowed.
    Fri Oct 31 07:55:30 2025 -> SOLVERINFO: Latitude Line Solver took 340 steps out of 1902 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 317 steps out of 1902 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: PercentComplete: 47.1
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Starting layer (relative index): 5
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 320 steps out of 2032 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 370 steps out of 2032 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 370 steps out of 2032 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 334 steps out of 2032 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: PercentComplete: 49.9
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Starting layer (relative index): 6
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 221 steps out of 1260 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 220 steps out of 1260 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 231 steps out of 1260 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 240 steps out of 1260 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 228 steps out of 1260 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 224 steps out of 1260 max allowed.
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: PercentComplete: 52.7
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Starting layer (relative index): 7
    Fri Oct 31 07:55:31 2025 -> SOLVERINFO: Latitude Line Solver took 441 steps out of 4204 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 440 steps out of 4204 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 434 steps out of 4204 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: PercentComplete: 55.5
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Starting layer (relative index): 8
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 282 steps out of 1460 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 279 steps out of 1460 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 272 steps out of 1460 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 255 steps out of 1460 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 295 steps out of 1460 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 263 steps out of 1460 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: PercentComplete: 58.2
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Starting layer (relative index): 9
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 280 steps out of 1374 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 254 steps out of 1374 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 224 steps out of 1374 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 260 steps out of 1374 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 254 steps out of 1374 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Latitude Line Solver took 265 steps out of 1374 max allowed.
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: PercentComplete: 61
    Fri Oct 31 07:55:32 2025 -> SOLVERINFO: Starting layer (relative index): 10
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Longitude Line Solver took 470 steps out of 4388 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: PercentComplete: 63.8
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Starting layer (relative index): 11
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 233 steps out of 1280 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 224 steps out of 1280 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 262 steps out of 1280 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 225 steps out of 1280 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 227 steps out of 1280 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 240 steps out of 1280 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: PercentComplete: 66.6
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Oracle for plane id 2 received seed of 1604768860
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Thread 0 gets seed: 1604768860
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Thread 1 gets seed: 1604768939
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Thread 2 gets seed: 1604769018
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Thread 3 gets seed: 1604769097
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Starting layer (relative index): 0
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 380 steps out of 1982 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 347 steps out of 1982 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 392 steps out of 1982 max allowed.
    Fri Oct 31 07:55:33 2025 -> SOLVERINFO: Latitude Line Solver took 340 steps out of 1982 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 354 steps out of 1982 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: PercentComplete: 69.3
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Starting layer (relative index): 1
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 342 steps out of 1940 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 357 steps out of 1940 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 360 steps out of 1940 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 355 steps out of 1940 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 379 steps out of 1940 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: PercentComplete: 72.1
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Starting layer (relative index): 2
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 220 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 251 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 207 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 231 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 242 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 221 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 260 steps out of 1264 max allowed.
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: PercentComplete: 74.9
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Starting layer (relative index): 3
    Fri Oct 31 07:55:34 2025 -> SOLVERINFO: Latitude Line Solver took 435 steps out of 4868 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 460 steps out of 4868 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: PercentComplete: 77.7
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Starting layer (relative index): 4
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 272 steps out of 1432 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 263 steps out of 1432 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 255 steps out of 1432 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 259 steps out of 1432 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 268 steps out of 1432 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: PercentComplete: 80.5
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Starting layer (relative index): 5
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 263 steps out of 1398 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 267 steps out of 1398 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 266 steps out of 1398 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 240 steps out of 1398 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 238 steps out of 1398 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Latitude Line Solver took 260 steps out of 1398 max allowed.
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: PercentComplete: 83.3
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Starting layer (relative index): 6
    Fri Oct 31 07:55:35 2025 -> SOLVERINFO: Longitude Line Solver took 388 steps out of 4376 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Longitude Line Solver took 431 steps out of 4388 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: PercentComplete: 86
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Starting layer (relative index): 7
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 222 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 252 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 216 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 241 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 201 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 247 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 228 steps out of 1276 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: PercentComplete: 88.8
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Starting layer (relative index): 8
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 313 steps out of 1822 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 337 steps out of 1822 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 320 steps out of 1822 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 309 steps out of 1822 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: PercentComplete: 91.6
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Starting layer (relative index): 9
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 360 steps out of 2138 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 344 steps out of 2138 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 403 steps out of 2138 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Latitude Line Solver took 380 steps out of 2138 max allowed.
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: PercentComplete: 94.4
    Fri Oct 31 07:55:36 2025 -> SOLVERINFO: Starting layer (relative index): 10
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 230 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 244 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 216 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 213 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 217 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 210 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 223 steps out of 1254 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: PercentComplete: 97.2
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Starting layer (relative index): 11
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 440 steps out of 3706 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: Latitude Line Solver took 440 steps out of 3706 max allowed.
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: PercentComplete: 100
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME: SolverManager:  = 10.652 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:   XYPlaneMSSolver:  = 2.490 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:           I/O:  = 0.199 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:           MicroStructureLineSolver:  = 2.260 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   Init Latitude:  = 0.000 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   Init Longitude:  = 0.004 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   Line Terminator:  = 0.026 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   Prep Latitude Step Solver:  = 0.000 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   Prep Longitude Step Solver:  = 0.016 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   SolidificationSolver:  = 2.189 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Grain Boundary Identification:  = 0.804 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Nucleation:  = 0.804 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Variable Update:  = 0.359 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Velocity:  = 0.218 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:   XZPlaneMSSolver:  = 3.856 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:           I/O:  = 0.243 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:           VerticalPlaneSolutionGenerator:  = 3.612 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   MicroStructureLineSolver:  = 3.553 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Init Latitude:  = 0.007 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Init Longitude:  = 0.000 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Line Terminator:  = 0.073 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Prep Latitude Step Solver:  = 0.040 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Prep Longitude Step Solver:  = 0.003 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           SolidificationSolver:  = 3.414 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Grain Boundary Identification:  = 1.130 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Nucleation:  = 1.386 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Variable Update:  = 0.596 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Velocity:  = 0.283 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:   YZPlaneMSSolver:  = 4.287 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:           I/O:  = 0.233 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:           VerticalPlaneSolutionGenerator:  = 4.054 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                   MicroStructureLineSolver:  = 4.002 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Init Latitude:  = 0.008 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Init Longitude:  = 0.000 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Line Terminator:  = 0.084 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Prep Latitude Step Solver:  = 0.043 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           Prep Longitude Step Solver:  = 0.004 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                           SolidificationSolver:  = 3.846 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Grain Boundary Identification:  = 1.273 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Nucleation:  = 1.549 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Variable Update:  = 0.684 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: TIME:                                   Velocity:  = 0.319 s
    Fri Oct 31 07:55:37 2025 -> SOLVERINFO: End Run
    Fri Oct 31 07:55:37 2025 -> USERINFO: Microstructure Solver run completed
    Fri Oct 31 07:55:38 2025 -> SOLVERINFO: License successfully returned.







.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 47.727 seconds)


.. _sphx_glr_download_examples_gallery_examples_02_additive_2d_microstructure.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 02_additive_2d_microstructure.ipynb <02_additive_2d_microstructure.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 02_additive_2d_microstructure.py <02_additive_2d_microstructure.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: 02_additive_2d_microstructure.zip <02_additive_2d_microstructure.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
